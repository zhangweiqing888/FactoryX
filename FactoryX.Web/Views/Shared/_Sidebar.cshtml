@{
    var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
    var isAuthenticated = User.Identity?.IsAuthenticated ?? false;
    var username = User.Identity?.Name;

}

<aside class="sidebar d-flex flex-column align-items-center py-3 px-2 w-auto min-vh-100">
    <!-- 上方的导航图标 -->
    <nav class="nav flex-column gap-3 flex-grow-1">
        <a asp-controller="Home" asp-action="Dashboard"
            class="nav-link sidebar-link  p-2 @(currentController == "Home" ? "active" : "")" title="仪表板">
            <i class="bi bi-speedometer2 fs-4"></i>
        </a>
        <a asp-controller="Machines" asp-action="Index"
            class="nav-link sidebar-link p-2 @(currentController == "Machines" ? "active" : "")" title="机器管理">
            <i class="bi bi-cpu fs-4"></i>
        </a>
        <a asp-controller="Products" asp-action="Index"
            class="nav-link sidebar-link p-2 @(currentController == "Products" ? "active" : "")" title="产品管理">
            <i class="bi bi-box-seam fs-4"></i>
        </a>
        <a asp-controller="Operator" asp-action="Index"
            class="nav-link sidebar-link p-2 @(currentController == "Operator" ? "active" : "")" title="操作员管理">
            <i class="bi bi-person-badge fs-4"></i>
        </a>
        <a asp-controller="WorkOrder" asp-action="Index"
            class="nav-link sidebar-link p-2 @(currentController == "WorkOrder" ? "active" : "")" title="工单管理">
            <i class="bi bi-list-task fs-4"></i>
        </a>
        <a asp-controller="ProductionRecord" asp-action="Index"
            class="nav-link sidebar-link p-2 @(currentController == "ProductionRecord" ? "active" : "")" title="生产记录">
            <i class="bi bi-clipboard-data fs-4"></i>
        </a>
        <a asp-controller="Shift" asp-action="Index"
            class="nav-link sidebar-link p-2 @(currentController == "Shift" ? "active" : "")" title="班次管理">
            <i class="bi bi-clock-history fs-4"></i>
        </a>
    </nav>

    <!-- 下方的个人资料/登录 -->
    <div class="">
        @if (isAuthenticated)
        {
            <a asp-controller="Account" asp-action="Profile" class="nav-link sidebar-link p-2" title="@username">
                <i class="bi bi-person-circle fs-4"></i>
            </a>
        }
        else
        {
            <a asp-controller="Account" asp-action="Login" class="nav-link sidebar-link p-2" title="登录">
                <i class="bi bi-box-arrow-in-right fs-4"></i>
            </a>
        }
    </div>
</aside>




<style>
    .sidebar {
        background: rgba(255, 255, 255, 0.95);
    @* border-right: 1px solid #044ddf; *@
    }

    [data-bs-theme="dark"] .sidebar {
        background: rgba(30, 34, 54, 0.95);
    @* border-right: 1px solid #232946; *@
    }

    .sidebar-link {
        color: #555;
        font-size: 1.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 48px;
        height: 48px;
        border-radius: 50%;
        margin-bottom: 8px;
        transition: background 0.15s, color 0.15s, transform 0.15s;
        text-decoration: none;
    }

    .sidebar-link.active,
    .sidebar-link:hover {
        background: #e0e7ff;
        color: #0d6efd;
        transform: scale(1.12);
    }

    [data-bs-theme="dark"] .sidebar-link.active,
    [data-bs-theme="dark"] .sidebar-link:hover {
        background: #232946;
        color: #60a5fa;
    }
</style>